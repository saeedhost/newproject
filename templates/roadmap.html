{% extends "base.html" %}

{% block content %}

    <!-- Header Start -->
    <div class="container-fluid hero-header bg-light py-5 mb-5">
        <div class="container py-5">
            <div class="row g-5 align-items-center">
                <div class="col-lg-6">
                    <h1 class="display-4 mb-3 animated slideInDown">Roadmap</h1>
                    <nav aria-label="breadcrumb animated slideInDown">
                        <ol class="breadcrumb mb-0">
                            <li class="breadcrumb-item"><a href="#">Home</a></li>
                            <li class="breadcrumb-item"><a href="#">Pages</a></li>
                            <li class="breadcrumb-item active" aria-current="page">Roadmap</li>
                        </ol>
                    </nav>
                </div>
                <div class="col-lg-6 animated fadeIn">
                    <img class="img-fluid animated pulse infinite" style="animation-duration: 3s;" src="/static/img/hero-2.png" alt="">
                </div>
            </div>
        </div>
    </div>
    <!-- Header End -->


    <!-- Roadmap Start -->
    <div class="container-xxl py-5">
        <div class="container">
            <div class="text-center mx-auto wow fadeInUp" data-wow-delay="0.1s" style="max-width: 500px;">
                <h1 class="display-6">Complex Queries</h1>
                <p class="text-primary fs-5 mb-5">Display book details based on complex query</p>
            </div>
            <table class="table table-striped text-dark">
                <thead>
                  <tr>
                    <th scope="col">ID</th>
                    <th scope="col">Title</th>
                    <th scope="col">Publish Date</th>
                    <th scope="col">Price</th>
                    <th scope="col">Author Name</th>
                  </tr>
                </thead>
                <tbody>
                  {% for b in book %}
                  <tr>
                    <th scope="row">{{ b.id }}</th>
                    <td>{{b.title}}</td>
                    <td>{{b.publish_date}}</td>
                    <td>{{b.price}}</td>
                    <td>{{b.author}}</td>
                  </tr>
                  {% endfor %}


                </tbody>
              </table>
        </div>
    </div>
    <!-- Roadmap End -->


    <!-- Roadmap Start -->
    <div class="container-xxl py-5">
        <div class="container">
            <div class="text-center mx-auto wow fadeInUp" data-wow-delay="0.1s" style="max-width: 500px;">
                <h1 class="display-6">Annotate Example</h1>
                <p class="text-primary fs-5 mb-5">Getting each author total published books</p>
            </div>
            <table class="table table-striped text-dark">
                <thead>
                  <tr>
                    <th scope="col">ID</th>
                    <th scope="col">Author Name</th>
                    <th scope="col">Total Published Books</th>  
                  </tr>
                </thead>
                <tbody>
                  {% for abc in author_book_count %}
                  <tr>
                    <th scope="row">{{ abc.id }}</th>
                    <td>{{abc.name}}</td>
                    <td>{{abc.num_books}}</td>
                  </tr>
                  {% endfor %}


                </tbody>
              </table>
        </div>
    </div>
    <!-- Roadmap End -->

    <!-- Roadmap Start -->
    <div class="container-xxl py-5">
        <div class="container">
            <div class="text-center mx-auto wow fadeInUp" data-wow-delay="0.1s" style="max-width: 500px;">
                <h1 class="display-6">Aggregate Example</h1>
                <p class="text-primary fs-5 mb-5">Calculating Average Books price</p>
            </div>
            <div class="text-center text-dark">
                {{average_books}}
            </div>   
        </div>
    </div>
    <!-- Roadmap End -->

    <!-- Roadmap Start -->
    <div class="container-xxl py-5">
        <div class="container">
            <div class="text-center mx-auto wow fadeInUp" data-wow-delay="0.1s" style="max-width: 500px;">
                <h1 class="display-6">Select_Related</h1>
                <p class="text-primary fs-5 mb-5">Select_Related works on foreign key One to One</p>
            </div>
            <table class="table table-striped text-dark">
                <thead>
                  <tr>
                    <th scope="col">ID</th>
                    <th scope="col">Title</th>
                    <th scope="col">Publish Date</th>
                    <th scope="col">Price</th>
                    <th scope="col">Author Name</th>
                  </tr>
                </thead>
                <tbody>
                  {% for b in books_of_authors %}
                  <tr>
                    <th scope="row">{{ b.id }}</th>
                    <td>{{b.title}}</td>
                    <td>{{b.publish_date}}</td>
                    <td>{{b.price}}</td>
                    <td>{{b.author}}</td>
                  </tr>
                  {% endfor %}


                </tbody>
              </table>
        </div>
    </div>
    <!-- Roadmap End -->


     <!-- Roadmap Start -->
     <div class="container-xxl py-5">
        <div class="container">
            <div class="text-center mx-auto wow fadeInUp" data-wow-delay="0.1s" style="max-width: 500px;">
                <h1 class="display-6">Prefetch Related</h1>
                <p class="text-primary fs-5 mb-5">Prefetch_Related works on foreign key ManyToMany</p>
            </div>
            <table class="table table-striped text-dark">
                <thead>
                  <tr>
                    <th scope="col">ID</th>
                    <th scope="col">Author Name</th>
                    <th scope="col"> Books</th>  
                  </tr>
                </thead>
                <tbody>
                  {% for author in authors %}
                  <tr>
                    <th scope="row">{{ author.id }}</th>
                    <td>{{author.name}}</td>
                    {% for book in author.book_set.all %}
                        <td>{{book.title}}</td>
                        <td>{{book.publish_date}}</td>
                    {% endfor %}
                  </tr>
                  {% endfor %}


                </tbody>
              </table>
        </div>
    </div>
    <!-- Roadmap End -->

{% endblock %}